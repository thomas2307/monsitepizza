<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Calculateur Soir√©e Pizza & Flam's</title>
    <meta name="description" content="Planifiez votre soir√©e Pizza et Tarte Flamb√©e. Liste de courses automatique et pr√©cise.">
    
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* --- CSS STYLES --- */
        :root {
            --bg-color: #FAF3E0;
            --text-color: #2D2420;
            --accent-color: #C0392B;
            --secondary-color: #8D6E63;
            --card-bg: #FFFFFF;
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            background-image: linear-gradient(rgba(250, 243, 224, 0.95), rgba(250, 243, 224, 0.95)), url('https://www.transparenttextures.com/patterns/cream-paper.png');
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            border: 1px solid #EFEBE9;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 20px;
        }

        h1 { margin: 0; font-family: 'Merriweather', serif; color: var(--text-color); font-size: 1.5rem; }

        .lang-select { padding: 8px; border-radius: 6px; border: 1px solid #ccc; cursor: pointer; }

        .ad-banner-top {
            background-color: #f4f4f4; border: 1px dashed #bbb; text-align: center;
            padding: 10px; margin-bottom: 20px; font-size: 0.8rem; color: #888; border-radius: 6px;
        }

        #main-image {
            width: 100%; height: 220px; object-fit: cover; border-radius: 8px;
            margin-bottom: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Lignes de commande */
        .recipe-row {
            display: grid; grid-template-columns: 1.5fr 2fr 1fr auto; gap: 10px;
            align-items: center; background-color: #FDFBF7; padding: 15px;
            margin-bottom: 10px; border-radius: 8px; border: 1px solid #EEE;
        }
        .recipe-row:hover { border-color: #DDD; background-color: #fff; }

        select, input[type="number"] {
            width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;
            font-size: 0.95rem; background: #fff; box-sizing: border-box;
        }

        .btn-remove { background: none; border: none; color: #999; cursor: pointer; font-size: 1.2rem; }
        .btn-remove:hover { color: var(--accent-color); }

        .add-row-container { text-align: center; margin-bottom: 30px; }
        .btn-add {
            background-color: var(--secondary-color); color: white; border: none;
            padding: 10px 20px; border-radius: 50px; cursor: pointer; font-weight: bold;
        }
        .btn-add:hover { background-color: var(--accent-color); }

        /* R√©sultats */
        .results-header {
            text-align: center; background: var(--text-color); color: #fff;
            padding: 10px; border-radius: 8px 8px 0 0; margin-top: 20px;
        }
        .results-container { 
            border: 2px solid var(--text-color); border-top: none;
            border-radius: 0 0 8px 8px; padding: 20px; background-color: #fff;
        }

        table { width: 100%; border-collapse: collapse; }
        th, td { text-align: left; padding: 10px; border-bottom: 1px solid #f0f0f0; }
        th { color: #555; font-family: 'Merriweather', serif; }
        td.amount-cell { font-weight: 700; color: var(--accent-color); text-align: right; }

        .actions { text-align: center; margin: 30px 0; }
        .btn-print {
            background-color: var(--accent-color); color: #fff; border: none;
            padding: 14px 30px; font-size: 1.1rem; border-radius: 50px; cursor: pointer;
        }

        .affiliation-section {
            margin-top: 40px; padding: 20px; background-color: #FFF8E1;
            border: 2px dashed var(--secondary-color); border-radius: 12px;
            display: flex; align-items: center; gap: 20px;
        }
        .aff-link { color: var(--text-color); font-weight: bold; }

        @media (max-width: 600px) {
            .recipe-row { grid-template-columns: 1fr; position: relative; gap: 5px; }
            .btn-remove { position: absolute; top: 10px; right: 10px; }
            .affiliation-section { flex-direction: column; text-align: center; }
        }

        @media print {
            body { background: none; }
            .container { box-shadow: none; border: none; padding: 0; }
            .ad-banner-top, .affiliation-section, .actions, .lang-select, .add-row-container, .btn-remove { display: none !important; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 data-i18n="ui_title">Planificateur Soir√©e Pizza & Flam's</h1>
        <select id="language-select" class="lang-select">
            <option value="en">üá¨üáß EN</option>
            <option value="fr" selected>üá´üá∑ FR</option>
            <option value="it">üáÆüáπ IT</option>
            <option value="de">üá©üá™ DE</option>
            <option value="es">üá™üá∏ ES</option>
        </select>
    </header>

    <div class="ad-banner-top">
        [ESPACE PUBLICITAIRE - Banni√®re Google AdSense]
    </div>

    <img id="main-image" src="" alt="Food Image">

    <div id="order-rows-container">
        </div>

    <div class="add-row-container">
        <button class="btn-add" onclick="addNewRow()">
            <i class="fas fa-plus"></i> <span data-i18n="btn_add_row">Ajouter une ligne</span>
        </button>
    </div>

    <div class="results-header">
        <h2 style="margin:0; font-size:1.2rem;" data-i18n="ui_total_list">Liste de Courses Totale</h2>
    </div>
    <div class="results-container">
        <table>
            <thead>
                <tr><th data-i18n="ui_col_ingredient">Ingr√©dient</th><th data-i18n="ui_col_quantity" style="text-align: right;">Total</th></tr>
            </thead>
            <tbody id="shopping-list-tbody"></tbody>
        </table>
    </div>

    <div class="actions">
        <button class="btn-print" onclick="window.print()" data-i18n="btn_print">Imprimer ma Liste üñ®Ô∏è</button>
    </div>

    <div class="affiliation-section">
        <div style="font-size: 2.5rem;">üî•</div>
        <div class="aff-content">
            <h4 data-i18n="aff_title">Cuisson Pro √† la Maison ?</h4>
            <p data-i18n="aff_text">Le secret d'une p√¢te croustillante est la temp√©rature (500¬∞C).</p>
            <a href="#" class="aff-link" target="_blank" data-i18n="aff_btn">Voir les Fours √† Pizza (Ooni/Gozney) ></a>
        </div>
    </div>
</div>

<script>
    /* --- CONFIGURATION & DONN√âES --- */

    const IMAGES = {
        pizza: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?auto=format&fit=crop&w=1000&q=80",
        tarte: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Tarte_flamb%C3%A9e_originale.jpg/1000px-Tarte_flamb%C3%A9e_originale.jpg"
    };

    /* --- TRADUCTIONS CORRIG√âES --- */
    const translations = {
        en: {
            ui_title: "Pizza & Flammkuchen Planner", btn_add_row: "Add Recipe Row", ui_total_list: "Total Shopping List",
            ui_col_ingredient: "Ingredient", ui_col_quantity: "Total Qty", btn_print: "Print List üñ®Ô∏è",
            type_pizza: "üçï Italian Pizza", type_tarte: "üî• Alsatian Flammkuchen",
            aff_title: "Restaurant Quality?", aff_text: "You need 500¬∞C heat for perfect crusts.", aff_btn: "Check Pizza Ovens >",
            // Variants
            var_margherita: "Margherita", 
            var_reine: "Ham & Mushrooms (Regina)", 
            var_pepperoni: "Pepperoni", 
            var_fourcheese: "Four Cheeses",
            var_tradition: "Traditional (Bacon/Onion)", 
            var_gratinee: "Au Gratin (with Cheese)", 
            var_forestiere: "Mushroom & Bacon", 
            var_munster: "Munster Cheese",
            // Ingredients
            ing_flour: "Flour (Type 00)", ing_water: "Water", ing_salt: "Salt", ing_yeast: "Fresh Yeast", ing_oil: "Oil",
            ing_sauce_tomato: "Tomato Sauce", ing_mozzarella: "Mozzarella", ing_basil: "Basil", ing_ham: "Cooked Ham",
            ing_mushrooms: "Mushrooms", ing_pepperoni: "Pepperoni", ing_gorgonzola: "Gorgonzola", ing_goat: "Goat Cheese", ing_parmesan: "Parmesan",
            ing_creme_fraiche: "Cr√®me Fra√Æche", ing_fromage_blanc: "Fromage Blanc", ing_lardons: "Bacon/Lardons", ing_onions: "Onions",
            ing_nutmeg: "Nutmeg", ing_emmental: "Emmental", ing_munster: "Munster",
            unit_g: "g", unit_ml: "ml", unit_some: "leaves", unit_pinch: "pinch", unit_slices: "slices"
        },
        fr: {
            ui_title: "Planificateur Soir√©e Pizza & Flam's", btn_add_row: "Ajouter une ligne", ui_total_list: "Liste de Courses Totale",
            ui_col_ingredient: "Ingr√©dient", ui_col_quantity: "Qt√© Totale", btn_print: "Imprimer la liste üñ®Ô∏è",
            type_pizza: "üçï Pizza Italienne", type_tarte: "üî• Tarte Flamb√©e (Alsace)",
            aff_title: "Cuisson Pro √† la Maison ?", aff_text: "Le four domestique ne chauffe pas assez (max 250¬∞C). Il faut 500¬∞C.", aff_btn: "Voir les Fours √† Pizza >",
            // Variantes
            var_margherita: "Margherita", 
            var_reine: "Reine (Jambon/Champis)", 
            var_pepperoni: "Pepperoni", 
            var_fourcheese: "4 Fromages",
            var_tradition: "Traditionnelle (Lardons)", 
            var_gratinee: "Gratin√©e (Emmental)", 
            var_forestiere: "Foresti√®re (Champignons)", 
            var_munster: "Au Munster",
            // Ingr√©dients
            ing_flour: "Farine (T55/00)", ing_water: "Eau", ing_salt: "Sel", ing_yeast: "Levure Fra√Æche", ing_oil: "Huile",
            ing_sauce_tomato: "Sauce Tomate", ing_mozzarella: "Mozzarella", ing_basil: "Basilic", ing_ham: "Jambon Cuit",
            ing_mushrooms: "Champignons", ing_pepperoni: "Pepperoni", ing_gorgonzola: "Gorgonzola", ing_goat: "Ch√®vre", ing_parmesan: "Parmesan",
            ing_creme_fraiche: "Cr√®me Fra√Æche √©paisse", ing_fromage_blanc: "Fromage Blanc", ing_lardons: "Lardons Fum√©s", ing_onions: "Oignons",
            ing_nutmeg: "Muscade", ing_emmental: "Emmental r√¢p√©", ing_munster: "Munster",
            unit_g: "g", unit_ml: "ml", unit_some: "feuilles", unit_pinch: "pinc√©e", unit_slices: "tranches"
        },
        de: {
            ui_title: "Pizza & Flammkuchen Planer", btn_add_row: "Zeile hinzuf√ºgen", ui_total_list: "Einkaufsliste",
            ui_col_ingredient: "Zutat", ui_col_quantity: "Menge", btn_print: "Liste Drucken üñ®Ô∏è",
            type_pizza: "üçï Pizza", type_tarte: "üî• Els√§sser Flammkuchen",
            aff_title: "Wie beim Italiener?", aff_text: "Normale √ñfen sind zu kalt. Sie brauchen 500¬∞C.", aff_btn: "Pizza√∂fen ansehen >",
            // Variantes
            var_margherita: "Margherita", 
            var_reine: "Schinken & Pilze", 
            var_pepperoni: "Pepperoni / Pikant", 
            var_fourcheese: "Vier K√§se",
            var_tradition: "Traditionell (Speck/Zwiebel)", 
            var_gratinee: "Gratiniert (mit K√§se)", 
            var_forestiere: "Mit Pilzen (Wald-Art)", 
            var_munster: "Mit M√ºnsterk√§se",
            // Ingr√©dients
            ing_flour: "Mehl (Type 00)", ing_water: "Wasser", ing_salt: "Salz", ing_yeast: "Frische Hefe", ing_oil: "√ñl",
            ing_sauce_tomato: "Tomatensauce", ing_mozzarella: "Mozzarella", ing_basil: "Basilikum", ing_ham: "Gekochter Schinken",
            ing_mushrooms: "Champignons", ing_pepperoni: "Pepperoni", ing_gorgonzola: "Gorgonzola", ing_goat: "Ziegenk√§se", ing_parmesan: "Parmesan",
            ing_creme_fraiche: "Cr√®me Fra√Æche", ing_fromage_blanc: "Speisequark", ing_lardons: "Speckw√ºrfel", ing_onions: "Zwiebeln",
            ing_nutmeg: "Muskatnuss", ing_emmental: "Emmentaler", ing_munster: "M√ºnsterk√§se",
            unit_g: "g", unit_ml: "ml", unit_some: "Bl√§tter", unit_pinch: "Prise", unit_slices: "Scheiben"
        },
        it: {
            ui_title: "Pianificatore Pizza & Flammkuchen", btn_add_row: "Aggiungi riga", ui_total_list: "Lista della Spesa",
            ui_col_ingredient: "Ingrediente", ui_col_quantity: "Qt√† Totale", btn_print: "Stampa Lista üñ®Ô∏è",
            type_pizza: "üçï Pizza", type_tarte: "üî• Flammkuchen (Alsaziana)",
            aff_title: "Qualit√† Ristorante?", aff_text: "I forni domestici non bastano. Serve un forno da 500¬∞C.", aff_btn: "Vedi Forni Pizza >",
            // Variantes
            var_margherita: "Margherita", 
            var_reine: "Prosciutto e Funghi", 
            var_pepperoni: "Diavola (Salame)", 
            var_fourcheese: "Ai 4 Formaggi",
            var_tradition: "Tradizionale (Pancetta)", 
            var_gratinee: "Gratinata (al Formaggio)", 
            var_forestiere: "Boscaiola (Funghi)", 
            var_munster: "Al Munster",
            // Ingr√©dients
            ing_flour: "Farina (00)", ing_water: "Acqua", ing_salt: "Sale", ing_yeast: "Lievito Fresco", ing_oil: "Olio",
            ing_sauce_tomato: "Passata", ing_mozzarella: "Mozzarella", ing_basil: "Basilico", ing_ham: "Prosciutto Cotto",
            ing_mushrooms: "Funghi", ing_pepperoni: "Salame Piccante", ing_gorgonzola: "Gorgonzola", ing_goat: "Caprino", ing_parmesan: "Parmigiano",
            ing_creme_fraiche: "Panna Acida", ing_fromage_blanc: "Formaggio Fresco", ing_lardons: "Pancetta", ing_onions: "Cipolle",
            ing_nutmeg: "Noce Moscata", ing_emmental: "Emmental", ing_munster: "Munster",
            unit_g: "g", unit_ml: "ml", unit_some: "foglie", unit_pinch: "pizzico", unit_slices: "fette"
        },
        es: {
            ui_title: "Planificador Fiesta Pizza", btn_add_row: "A√±adir fila", ui_total_list: "Lista de Compras",
            ui_col_ingredient: "Ingrediente", ui_col_quantity: "Total", btn_print: "Imprimir Lista üñ®Ô∏è",
            type_pizza: "üçï Pizza", type_tarte: "üî• Flammkuchen (Alsaciana)",
            aff_title: "¬øCalidad Restaurante?", aff_text: "Necesitas 500¬∞C. Descubre hornos especializados.", aff_btn: "Ver Hornos Pizza >",
            // Variantes
            var_margherita: "Margherita", 
            var_reine: "Jam√≥n y Champi√±ones", 
            var_pepperoni: "Pepperoni", 
            var_fourcheese: "Cuatro Quesos",
            var_tradition: "Tradicional (Bacon)", 
            var_gratinee: "Gratinada (con Queso)", 
            var_forestiere: "Con Setas y Bacon", 
            var_munster: "Queso Munster",
            // Ingr√©dients
            ing_flour: "Harina (Fuerza)", ing_water: "Agua", ing_salt: "Sal", ing_yeast: "Levadura Fresca", ing_oil: "Aceite",
            ing_sauce_tomato: "Tomate", ing_mozzarella: "Mozzarella", ing_basil: "Albahaca", ing_ham: "Jam√≥n Cocido",
            ing_mushrooms: "Champi√±ones", ing_pepperoni: "Pepperoni", ing_gorgonzola: "Gorgonzola", ing_goat: "Queso de Cabra", ing_parmesan: "Parmesano",
            ing_creme_fraiche: "Nata espesa", ing_fromage_blanc: "Queso Batido", ing_lardons: "Bacon", ing_onions: "Cebollas",
            ing_nutmeg: "Nuez Moscada", ing_emmental: "Emmental", ing_munster: "Munster",
            unit_g: "g", unit_ml: "ml", unit_some: "hojas", unit_pinch: "pizca", unit_slices: "lonchas"
        }
    };

    /* --- LOGIQUE RECETTES --- */
    const recipeData = {
        pizza: {
            // P√¢ton standard 250g, Hydratation 63%
            dough: { ing_flour: 150, ing_water: 95, ing_salt: 3, ing_yeast: 1 }, 
            variants: {
                margherita: { toppings: { ing_sauce_tomato: 80, ing_mozzarella: 100, ing_basil: "unit_some" } },
                reine: { toppings: { ing_sauce_tomato: 80, ing_mozzarella: 80, ing_ham: 50, ing_mushrooms: 40 } },
                pepperoni: { toppings: { ing_sauce_tomato: 80, ing_mozzarella: 80, ing_pepperoni: 40 } },
                fourcheese: { toppings: { ing_sauce_tomato: 50, ing_mozzarella: 40, ing_gorgonzola: 30, ing_goat: 30, ing_parmesan: 20 } }
            }
        },
        tarte: {
            // P√¢te tr√®s fine (130g de p√¢te) + Appareil standard 100g (50/50)
            dough: { ing_flour: 120, ing_water: 60, ing_oil: 10, ing_salt: 2 },
            baseTopping: { ing_creme_fraiche: 50, ing_fromage_blanc: 50, ing_onions: 50, ing_nutmeg: "unit_pinch" },
            variants: {
                tradition: { toppings: { ...{ing_lardons: 60} } },
                gratinee: { toppings: { ...{ing_lardons: 60, ing_emmental: 40} } },
                forestiere: { toppings: { ...{ing_lardons: 60, ing_mushrooms: 40} } },
                munster: { toppings: { ...{ing_lardons: 60, ing_munster: 50} } }
            }
        }
    };

    // Fusion de la base Tarte avec les variantes
    for (const v in recipeData.tarte.variants) {
        recipeData.tarte.variants[v].toppings = { ...recipeData.tarte.baseTopping, ...recipeData.tarte.variants[v].toppings };
    }

    /* --- JS LOGIC --- */
    const containerRows = document.getElementById('order-rows-container');
    const mainImage = document.getElementById('main-image');
    const langSelect = document.getElementById('language-select');
    let currentLang = 'fr';

    function createRowHTML(index, forcedType = null) {
        let defaultType = 'pizza';
        if (forcedType) {
            defaultType = forcedType;
        } else {
            // Lignes manuelles : Pizza si index >= 4
            if (index >= 4) defaultType = 'pizza'; 
            else defaultType = (index < 2) ? 'pizza' : 'tarte';
        }
        
        return `
            <div class="recipe-row" id="row-${index}">
                <div class="control-group">
                    <select class="type-select" onchange="updateRowType(this, ${index}); calculateTotal();">
                        <option value="pizza" ${defaultType === 'pizza' ? 'selected' : ''}>${translations[currentLang].type_pizza}</option>
                        <option value="tarte" ${defaultType === 'tarte' ? 'selected' : ''}>${translations[currentLang].type_tarte}</option>
                    </select>
                </div>
                <div class="control-group">
                    <select class="variant-select" onchange="calculateTotal()">
                        </select>
                </div>
                <div class="control-group">
                    <input type="number" class="count-input" value="0" min="0" oninput="calculateTotal()" placeholder="0">
                </div>
                <button class="btn-remove" onclick="removeRow(${index})" title="Supprimer">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        `;
    }

    function addNewRow(forcedType = null) {
        const index = new Date().getTime() + Math.floor(Math.random() * 1000);
        containerRows.insertAdjacentHTML('beforeend', createRowHTML(index, forcedType));
        const newRow = document.getElementById(`row-${index}`);
        updateRowType(newRow.querySelector('.type-select'), index);
        calculateTotal();
    }

    function removeRow(id) {
        const row = document.getElementById(`row-${id}`);
        if(row) row.remove();
        calculateTotal();
        updateMainImage();
    }

    function updateRowType(selectElement, rowId) {
        const row = document.getElementById(`row-${rowId}`);
        const type = selectElement.value;
        const variantSelect = row.querySelector('.variant-select');
        
        variantSelect.innerHTML = '';
        const variants = recipeData[type].variants;
        for (const [key, val] of Object.entries(variants)) {
            const opt = document.createElement('option');
            opt.value = key;
            const transKey = 'var_' + key;
            opt.textContent = translations[currentLang][transKey] || key;
            variantSelect.appendChild(opt);
        }
        updateMainImage();
    }

    function updateMainImage() {
        const firstRow = document.querySelector('.recipe-row');
        if (firstRow) {
            const type = firstRow.querySelector('.type-select').value;
            mainImage.src = IMAGES[type];
        }
    }

    function calculateTotal() {
        const totalIngredients = {}; 

        document.querySelectorAll('.recipe-row').forEach(row => {
            const type = row.querySelector('.type-select').value;
            const variant = row.querySelector('.variant-select').value;
            const count = parseInt(row.querySelector('.count-input').value) || 0;

            if (count > 0) {
                const dough = recipeData[type].dough;
                addToTotal(totalIngredients, dough, count);
                const toppings = recipeData[type].variants[variant].toppings;
                addToTotal(totalIngredients, toppings, count);
            }
        });

        renderTotalTable(totalIngredients);
    }

    function addToTotal(totalObj, ingredients, multiplier) {
        for (const [key, val] of Object.entries(ingredients)) {
            if (!totalObj[key]) totalObj[key] = { amount: 0, unit: '' };

            if (typeof val === 'number') {
                totalObj[key].amount += (val * multiplier);
                if (key.includes('water') || key.includes('oil') || key.includes('ml')) {
                    totalObj[key].unit = translations[currentLang].unit_ml;
                } else {
                    totalObj[key].unit = translations[currentLang].unit_g;
                }
            } else {
                totalObj[key].isSpecial = true;
                totalObj[key].specialKey = val;
            }
        }
    }

    function renderTotalTable(totals) {
        const tbody = document.getElementById('shopping-list-tbody');
        tbody.innerHTML = '';
        
        if (Object.keys(totals).length === 0) {
            tbody.innerHTML = `<tr><td colspan="2" style="text-align:center; color:#999; font-style:italic;">Indiquez un nombre de pizzas/flams...</td></tr>`;
            return;
        }

        for (const [key, data] of Object.entries(totals)) {
            const tr = document.createElement('tr');
            const tdName = document.createElement('td');
            tdName.textContent = translations[currentLang][key] || key;
            const tdAmount = document.createElement('td');
            tdAmount.className = 'amount-cell';
            
            if (data.isSpecial) {
                tdAmount.textContent = translations[currentLang][data.specialKey] || "";
            } else {
                const rounded = Math.round(data.amount * 10) / 10;
                tdAmount.textContent = `${rounded} ${data.unit}`;
            }
            tr.appendChild(tdName);
            tr.appendChild(tdAmount);
            tbody.appendChild(tr);
        }
    }

    function updateUILanguage() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[currentLang][key]) el.textContent = translations[currentLang][key];
        });
        
        document.querySelectorAll('.recipe-row').forEach((row) => {
            const typeSelect = row.querySelector('.type-select');
            const savedVariant = row.querySelector('.variant-select').value;
            
            typeSelect.options[0].textContent = translations[currentLang].type_pizza;
            typeSelect.options[1].textContent = translations[currentLang].type_tarte;
            
            updateRowType(typeSelect, row.id.split('-')[1]); 
            row.querySelector('.variant-select').value = savedVariant; 
        });
        calculateTotal();
    }

    langSelect.addEventListener('change', (e) => {
        currentLang = e.target.value;
        updateUILanguage();
    });

    // --- INITIALISATION DES 4 LIGNES ---
    function init() {
        // Ligne 0 : Pizza (4 par d√©faut)
        containerRows.insertAdjacentHTML('beforeend', createRowHTML(0, 'pizza'));
        updateRowType(document.getElementById('row-0').querySelector('.type-select'), 0);
        document.getElementById('row-0').querySelector('.count-input').value = 4;

        // Ligne 1 : Pizza (0 par d√©faut)
        containerRows.insertAdjacentHTML('beforeend', createRowHTML(1, 'pizza'));
        updateRowType(document.getElementById('row-1').querySelector('.type-select'), 1);

        // Ligne 2 : Tarte (0 par d√©faut)
        containerRows.insertAdjacentHTML('beforeend', createRowHTML(2, 'tarte'));
        updateRowType(document.getElementById('row-2').querySelector('.type-select'), 2);

        // Ligne 3 : Tarte (0 par d√©faut)
        containerRows.insertAdjacentHTML('beforeend', createRowHTML(3, 'tarte'));
        updateRowType(document.getElementById('row-3').querySelector('.type-select'), 3);
        
        calculateTotal();
    }

    init();

</script>
</body>
</html>
